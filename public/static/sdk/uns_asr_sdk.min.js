!function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){t.exports=r(8)},function(t,e,r){"use strict";function n(){}function i(t){try{return t.then}catch(t){return m=t,g}}function o(t,e){try{return t(e)}catch(t){return m=t,g}}function s(t,e,r){try{t(e,r)}catch(t){return m=t,g}}function a(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._45=0,this._81=0,this._65=null,this._54=null,t!==n&&v(t,this)}function u(t,e,r){return new t.constructor(function(i,o){var s=new a(n);s.then(i,o),l(t,new p(e,r,s))})}function l(t,e){for(;3===t._81;)t=t._65;return a._10&&a._10(t),0===t._81?0===t._45?(t._45=1,void(t._54=e)):1===t._45?(t._45=2,void(t._54=[t._54,e])):void t._54.push(e):void c(t,e)}function c(t,e){y(function(){var r=1===t._81?e.onFulfilled:e.onRejected;if(null===r)return void(1===t._81?f(e.promise,t._65):h(e.promise,t._65));var n=o(r,t._65);n===g?h(e.promise,m):f(e.promise,n)})}function f(t,e){if(e===t)return h(t,new TypeError("A promise cannot be resolved with itself."));if(e&&("object"==typeof e||"function"==typeof e)){var r=i(e);if(r===g)return h(t,m);if(r===t.then&&e instanceof a)return t._81=3,t._65=e,void d(t);if("function"==typeof r)return void v(r.bind(e),t)}t._81=1,t._65=e,d(t)}function h(t,e){t._81=2,t._65=e,a._97&&a._97(t,e),d(t)}function d(t){if(1===t._45&&(l(t,t._54),t._54=null),2===t._45){for(var e=0;e<t._54.length;e++)l(t,t._54[e]);t._54=null}}function p(t,e,r){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=r}function v(t,e){var r=!1,n=s(t,function(t){r||(r=!0,f(e,t))},function(t){r||(r=!0,h(e,t))});r||n!==g||(r=!0,h(e,m))}var y=r(2),m=null,g={};t.exports=a,a._10=null,a._97=null,a._61=n,a.prototype.then=function(t,e){if(this.constructor!==a)return u(this,t,e);var r=new a(n);return l(this,new p(t,e,r)),r}},function(t,e,r){"use strict";function n(t){u.length||(o(),l=!0),u[u.length]=t}function i(){for(;c<u.length;){var t=c;if(c+=1,u[t].call(),c>f){for(var e=0,r=u.length-c;e<r;e++)u[e]=u[e+c];u.length-=c,c=0}}u.length=0,c=0,l=!1}function o(){var t=process.domain;t&&(s||(s=r(20)),s.active=process.domain=null),l&&a?setImmediate(i):process.nextTick(i),t&&(s.active=process.domain=t)}var s,a="function"==typeof setImmediate;t.exports=n;var u=[],l=!1,c=0,f=1024;n.requestFlush=o},function(t,e){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=function(){function t(e,n,i,o){if(r(this,t),!e||!n||!i)throw new Error("Invalid settings specified for the resampler.");this.resampler=null,this.fromSampleRate=e,this.toSampleRate=n,this.channels=i||0,this.inputBufferSize=o,this.initialize()}return n(t,[{key:"initialize",value:function(){this.fromSampleRate==this.toSampleRate?(this.resampler=function(t){return t},this.ratioWeight=1):(this.fromSampleRate<this.toSampleRate?(this.linearInterpolation(),this.lastWeight=1):(this.multiTap(),this.tailExists=!1,this.lastWeight=0),this.initializeBuffers(),this.ratioWeight=this.fromSampleRate/this.toSampleRate)}},{key:"bufferSlice",value:function(t){try{return this.outputBuffer.subarray(0,t)}catch(e){try{return this.outputBuffer.length=t,this.outputBuffer}catch(e){return this.outputBuffer.slice(0,t)}}}},{key:"initializeBuffers",value:function(){this.outputBufferSize=Math.ceil(this.inputBufferSize*this.toSampleRate/this.fromSampleRate/this.channels*1.0000004768371582)+this.channels+this.channels;try{this.outputBuffer=new Float32Array(this.outputBufferSize),this.lastOutput=new Float32Array(this.channels)}catch(t){this.outputBuffer=[],this.lastOutput=[]}}},{key:"linearInterpolation",value:function(){var t=this;this.resampler=function(e){var r=e.length,n=t.channels,i=void 0,o=void 0,s=void 0,a=void 0,u=void 0,l=void 0,c=void 0,f=void 0,h=void 0;if(r%n!==0)throw new Error("Buffer was of incorrect sample length.");if(r<=0)return[];for(i=t.outputBufferSize,o=t.ratioWeight,s=t.lastWeight,a=0,u=0,l=0,c=0,f=t.outputBuffer;s<1;s+=o)for(u=s%1,a=1-u,t.lastWeight=s%1,h=0;h<t.channels;++h)f[c++]=t.lastOutput[h]*a+e[h]*u;for(s-=1,r-=n,l=Math.floor(s)*n;c<i&&l<r;){for(u=s%1,a=1-u,h=0;h<t.channels;++h)f[c++]=e[l+(h>0?h:0)]*a+e[l+(n+h)]*u;s+=o,l=Math.floor(s)*n}for(h=0;h<n;++h)t.lastOutput[h]=e[l++];return t.bufferSlice(c)}}},{key:"multiTap",value:function(){var t=this;this.resampler=function(e){var r=e.length,n=void 0,i=void 0,o=t.channels,s=void 0,a=void 0,u=void 0,l=void 0,c=void 0,f=void 0,h=void 0,d=void 0,p=void 0;if(r%o!==0)throw new Error("Buffer was of incorrect sample length.");if(r<=0)return[];for(n=t.outputBufferSize,i=[],s=t.ratioWeight,a=0,l=0,c=0,f=!t.tailExists,t.tailExists=!1,h=t.outputBuffer,d=0,p=0,u=0;u<o;++u)i[u]=0;do{if(f)for(a=s,u=0;u<o;++u)i[u]=0;else{for(a=t.lastWeight,u=0;u<o;++u)i[u]=t.lastOutput[u];f=!0}for(;a>0&&l<r;){if(c=1+l-p,!(a>=c)){for(u=0;u<o;++u)i[u]+=e[l+(u>0?" + "+u:"")]*a;p+=a,a=0;break}for(u=0;u<o;++u)i[u]+=e[l++]*c;p=l,a-=c}if(0!==a){for(t.lastWeight=a,u=0;u<o;++u)t.lastOutput[u]=i[u];t.tailExists=!0;break}for(u=0;u<o;++u)h[d++]=i[u]/s}while(l<r&&d<n);return t.bufferSlice(d)}}},{key:"resample",value:function(t){return this.fromSampleRate==this.toSampleRate?this.ratioWeight=1:(this.fromSampleRate<this.toSampleRate?this.lastWeight=1:(this.tailExists=!1,this.lastWeight=0),this.initializeBuffers(),this.ratioWeight=this.fromSampleRate/this.toSampleRate),this.resampler(t)}}]),t}();t.exports=i},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},n={LOGIN_ERROR:{code:-91900,msg:"登录失败"},REQUEST_ERROR:{code:-91008,msg:"连接服务器失败"},PROBE_ERROR:{code:-63012,msg:"音频资源上传失败"},END_ERROR:{code:-62001,msg:"识别失败"},LOGOUT_ERROR:{code:-91735,msg:"登出失败"},SDK_NOT_SUPPORTED:{code:-21001,msg:"浏览器不支持"},NOT_HTTPS:{code:-21005,msg:"无法打开麦克风,请使用https协议. Only secure origins are allowed (see: https://goo.gl/Y0ZkNV)."},NOT_ALLOWED_MIC:{code:-21002,msg:"用户拒绝访问麦克风"},NOT_SUPPORTED:{code:-21003,msg:"浏览器不支持录音"},NOT_FOUND_MIC:{code:-21004,msg:"找不到麦克风设备"},OTHER_RECORD_ERROR:{code:-61001,msg:"无法打开麦克风"},BLOB_ERROR:{code:-21006,msg:"获取音频失败"},PCM_ERROR:{code:-21007,msg:"pcm非法,请传入16bit的pcm"},SAMPLE_ERROR:{code:-21008,msg:"采样率错误,请传入正确的采样率"}};n.setSrvCode=function(t,e){return r({},t,{srvcode:e})},e.default=n},function(t,e){"use strict";function r(){for(var t=[],e="0123456789abcdef",r=0;r<36;r++)t[r]=e.substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]=e.substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-",t.join("")}function n(t){var e=new RegExp("/[^/]*\\.js$");if(document.currentScript)return document.currentScript.src.replace(e,"/")||"";for(var r=document.scripts,n=r.length;n>0;n--)if(r[n-1].src.indexOf(t)>-1)return r[n-1].src.replace(e,"/")||"";return""}function i(t){u=!!t}function o(){u&&window.console&&(console.log.apply?console.log.apply(console,arguments):console.log(JSON.stringify(arguments)))}function s(t){for(var e=t.length,r=new Int16Array(e);e--;){var n=Math.max(-1,Math.min(1,t[e]));r[e]=n<0?32768*n:32767*n}return r}function a(t){for(var e=t.length,r=new Float32Array(e);e--;){var n=t[e];r[e]=n>=32768?-(65536-n)/32768:n/32767}return r}Object.defineProperty(e,"__esModule",{value:!0}),e.uuid=r,e.curPath=n,e.setDebug=i,e.log=o,e.floatTo16BitPCM=s,e.int16ToFloat32BitPCM=a;var u=!1},function(t,e,r){"use strict";function n(t){var e;e=s.length?s.pop():new i,e.task=t,e.domain=process.domain,o(e)}function i(){this.task=null,this.domain=null}var o=r(2),s=[];t.exports=n,i.prototype.call=function(){this.domain&&this.domain.enter();var t=!0;try{this.task.call(),t=!1,this.domain&&this.domain.exit()}finally{t&&o.requestFlush(),this.task=null,this.domain=null,s.push(this)}}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=r(12),u=n(a),l=r(5),c=r(4),f=n(c),h=r(10),d=n(h),p=r(3),v=n(p);r(9),r(19),window.Promise||(window.Promise=u.default);var y="45gn7md5n44aak7a57rdjud3b5l4xdgv75saomys",m=({NODE_ENV:"production",APPKEY:"45gn7md5n44aak7a57rdjud3b5l4xdgv75saomys"}.SECRET,""),g=["general","video","music","poi","medical","home","fridge"],b=9600,w=2,_=4,R=16,S=32,E=1024,O=/[。；，？！.,;?!]$/,T=/[,，]$/,x=function(){function t(e){i(this,t),e=e||{},this.clearListener(),this._status=0,this._language="cn",this._notUseSlice=!1,this.closeMic=e.closeMic,this.swfSrc=e.swfSrc||t.curPath+"recorder.swf",this.init(e)}return s(t,[{key:"on",value:function(t,e){var r=this._events[t];r?r.push(e):this._events[t]=[e]}},{key:"emit",value:function(t,e){var r=this._events[t];r&&r.forEach(function(r){r(e,t)})}},{key:"removeListener",value:function(t,e){var r=this._events[t];if(r)if(e)for(var n=0,i=r.length;n<i;n++){var o=r[n];if(o===e)return r.splice(n,1)}else this._events[t]=void 0}},{key:"clearListener",value:function(){this._events={}}},{key:"init",value:function(t){var e=this;if(m=t.imei||"",this.useFlash=!1,this.recorderConfig={success:function(){e._status+=1,e.sdkReady()},audioprocess:function(t){e.collectPcm(t)},error:function(t){t.code===f.default.NOT_SUPPORTED.code?((0,l.log)("切换flash录音"),e.initFlashRecord()):((0,l.log)(t),e.emit("error",t))}},this.status=0,t.service?this.service=t.service:this.service="https://demo-edu.hivoice.cn:10443",(0,l.setDebug)(t.debug),this.initRecord(d.default.isSupported(),t.useFlash),(0,l.log)("init sdk 1.9"),this.uuid=(0,l.uuid)(),t.mode&&g.indexOf(t.mode)===-1)throw Error("模式错误, 请使用 general/video/music/poi/medical/home/fridge ");var r=t.userId||"",n=t.TPUserId||"",i=t.TPVersion||"v2",o=t.TPReturnType||"json",s=t.TPSessionId||"0",a=t.TPContext||"0",u=t.TPAdditionalService||"app_dinobot_service",c=t.mode||"general",h=t.voiceField||"near",p="json",v="speex",b="audio/x-wav",w=t.variable||"false",_=t.punctuated||"true",R=t.contextId||"";this.resetParams=function(){e.sessionId=e.uuid.replace(/-/g,"").toUpperCase();var l="sampleRate=16k;modelType="+c+";voiceField="+h+";textFormat="+p+";audioCodec="+v+";audioFormat="+b+";variable="+w+";punctuated="+_+";contextId="+R+";";return"medical"===t.mode&&(l+="productLine=dinobotPublicCloud;"),{K:y,U:r,I:m,CI:"OS=21",UI:e.uuid,SID:e.sessionId,SP:l,TP:"additionalService="+u+";returnType="+o+";version="+i+";sessionId="+s+";userId="+n+";context="+a,Connection:"keep-alive"}},this.params=this.resetParams(),this.probeNum=0,this.login()}},{key:"initRecord",value:function(t,e){this.closeMic||(!e&&t?((0,l.log)("使用h5模式"),this.recorder=new d.default(this.recorderConfig)):this.emit("error","录音不支持"))}},{key:"initFlashRecord",value:function(){var t=this;this.useFlash=!0,FlashRecorder.init(o({},this.recorderConfig,{audioprocess:function(e){t.collectPcm(e,2)},start:function(){t.emit("start")},swfSrc:this.swfSrc}))}},{key:"buildP",value:function(t,e,r){var n="2.0.11",i="0",o=this.params.SID,s="N"+r+"V"+n+"S"+t+"C"+e+"CV"+i+"SID["+o+"]";return"login"!==t&&"logout"!==t||(s="V"+n+"S["+t+"]CV"+i),s}},{key:"sdkReady",value:function(){var t=this;3===this._status&&setTimeout(function(){(0,l.log)("sdk is ready"),t.emit("ready")})}},{key:"login",value:function(){this.status+=1,this._status+=2,this.status+=w,this.sdkReady()}},{key:"request",value:function(){return this.status&w?(this.status+=R,this.uuid=(0,l.uuid)(),this.params=this.resetParams(),this.probeNum=0,new u.default(function(t){t(!0)})):void(0,l.log)("服务器未连接",this.status)}},{key:"setLanguage",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cn";this._language=t}},{key:"useSlice",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._notUseSlice=t}},{key:"probe",value:function(t){var e=this;if(this.status&S)return u.default.resolve("");var r="/asr/pcm",n={"X-EngineType":"cn"===this._language?"asr.zh_CH":"asr.en_US","session-id":this.params.SID,appkey:y,Connection:"keep-alive"};"en"===this._language&&(this._notUseSlice=!1,r="/en_asr/asr/pcm"),this._notUseSlice?r="/no_vad_asr/eval/pcm":n["X-Number"]=this.probeNum++;var i=new FormData;return i.append("voice",new Blob([new Int16Array(t).buffer])),fetch(""+this.service+r,{method:"POST",headers:n,body:i}).then(function(t){return 200!==t.status?(e.emit("error",f.default.setSrvCode(f.default.PROBE_ERROR,t.status)),u.default.reject("http status: "+t.status)):t.text()}).then(function(t){if(t)try{if(t=JSON.parse(t),e._notUseSlice)t=t||{},e.emit("result",{isEnd:!0,text:t.result});else if(t.currResult&&t.currResult.text&&t.currResult.text.result){var r=e._results.length-1;r=r>=0?r:0;var n=e._results[r]||"";"const"===t.currResult.text.status?(0!==r||n.length?n.length>=300&&O.test(t.currResult.text.result)?(T.test(n)?e._results[r]=n.substr(0,n.length-1)+"。\r\n":e._results[r]=""+n+(O.test(n)?"":"。")+"\r\n",e._results.push("  "+t.currResult.text.result)):e._results[r]=""+n+t.currResult.text.result:e._results.push("  "+t.currResult.text.result),e.emit("result",{text:e._results.join("")})):e.emit("result",{text:e._results.join("")+(t.currResult.text.result||"")})}return t}catch(t){return u.default.reject("解析失败")}}).catch(function(t){return(0,l.log)(t),e.status+=E,e.useFlash?FlashRecorder&&FlashRecorder.stop():e.recorder&&e.recorder.stop(),e.emit("error",f.default.PROBE_ERROR),u.default.reject("")})}},{key:"endService",value:function(){var t=this;this.status+=S;var e="/asr/pcm",r={"X-Number":this.probeNum++ +"$","X-EngineType":"cn"===this._language?"asr.zh_CH":"asr.en_US","session-id":this.params.SID,appkey:y,Connection:"close"};return"en"===this._language&&(e="/en_asr/asr/pcm"),fetch(""+this.service+e,{method:"POST",headers:r}).then(function(e){return t.status&S&&(t.status-=S),200!==e.status?(t.emit("error",f.default.setSrvCode(f.default.END_ERROR,e.status)),E):e.text()}).then(function(e){if(e!==E)if(e)try{e=JSON.parse(e);var r=[];e.allResult&&e.allResult.forEach(function(t){if(t.text&&"const"===t.text.status){var e=r.length-1;e=e>=0?e:0;var n=r[e]||"";0!==e||n.length?n.length>=300&&O.test(t.text.result)?(T.test(n)?r[e]=n.substr(0,n.length-1)+"。\r\n":r[e]=""+n+(O.test(n)?"":"。")+"\r\n",r.push("  "+t.text.result)):r[e]=""+n+t.text.result:r.push("  "+t.text.result)}});var n=r[r.length-1]||"";T.test(n)&&(r[r.length-1]=n.substr(0,n.length-1)+"。"),t.emit("result",o({},e,{text:r.join("")}))}catch(e){t.emit("error",f.default.END_ERROR)}else t.emit("result",{text:""})}).catch(function(e){(0,l.log)(e),t.status&S&&(t.status-=S),t.status+=E,t.emit("error",f.default.END_ERROR)})}},{key:"logout",value:function(){var t=this;return this.status+=8,(0,l.log)("登出服务器"),fetch(this.service+"/trafficRouter/SessionAuthentication",{method:"POST",headers:{K:y,P:this.buildP("logout","0","0")}}).then(function(e){200!==e.status&&t.emit("error",f.default.LOGOUT_ERROR)}).catch(function(e){(0,l.log)(e),t.emit("error",f.default.LOGOUT_ERROR)})}},{key:"collectPcm",value:function(t){arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;this.pcm_len++,this._pcmData.push.apply(this._pcmData,(0,l.floatTo16BitPCM)(t)),this._pcmData.length>=b&&!(this.status&E)&&this.probe(this._pcmData.splice(0,b))}},{key:"speexEncode",value:function(t){var e=!1,r=e?38:70,n=new Speex({quality:8,mode:e?0:1,bits_size:r});n.bits_size=e?15:70;for(var i=n.encode(t,!0),o=i[0],s=i[1],a=new Uint8Array(o.length+2*s.length),u=0,l=0,c=o.length;u<c;u++)u%r||(a[l++]=r,a[l++]=0),a[l++]=o[u];return new Blob([a])}},{key:"start",value:function(){var t=this;20&this.status||(this.pcm_len=0,this._pcmData=[],this._results=[],this.request().then(function(e){e===!0&&(t.status+=_,t.useFlash?FlashRecorder.start():(t.recorder.start(),t.emit("start")))}))}},{key:"stop",value:function(){var t=this;this.status&_&&(this.status=3,this.useFlash?FlashRecorder.stop():this.recorder.stop(),this.status&E||(this._pcmData.length>0?(this.probe(this._pcmData).then(function(e){t.endService()}),this.emit("stop")):this.probeNum?(this.endService(),this.emit("stop")):(this.emit("error",f.default.BLOB_ERROR),(0,l.log)(f.default.BLOB_ERROR))))}},{key:"_start",value:function(t){var e=this;20&this.status||(this.pcm_len=0,this._pcmData=[],this._results=[],this.request().then(function(r){if(r===!0)if(e.status+=_,e._notUseSlice)e.probe(t);else{var n=Math.ceil(t.length/40960),i=0,o=!1,s=function r(){o||setTimeout(function(){i<n?(e.probe(t.slice(40960*i,40960*(i+1))).catch(function(){o=!0}),r()):(e.status=3,e.endService()),i++},300)};s()}}))}},{key:"pcmAsr",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16;if(r*=1,!(r>=8e3))return this.emit("error",f.default.PCM_ERROR);var i=function(t){return t};if(16e3!==r&&(i=function(t){16===n&&(t=(0,l.int16ToFloat32BitPCM)(t));var e=new v.default(r,16e3,1,t.length);return(0,l.floatTo16BitPCM)(e.resampler(t))}),t instanceof File){var o=new FileReader;o.onload=function(t){window.buf=t.target.result,16===n?e._start(i(new Int16Array(t.target.result))):e._start(i(new Float32Array(t.target.result)))},o.readAsArrayBuffer(t)}else t instanceof Int16Array?this._start(i(t)):t instanceof Float32Array?this._start(i(t)):this.emit("error",f.default.PCM_ERROR)}},{key:"getBlob",value:function(){return this.useFlash?new Float32Array(FlashRecorder.getData()):new Int16Array((0,l.floatTo16BitPCM)(this.recorder.getBlob()))}}]),t}();t.exports=x},function(t,e,r){"use strict";!function(t){if(t){var e=/(msie\s|trident.*rv:)([\w.]+)/.exec(navigator.userAgent.toLowerCase());if(e&&e[2]<10)throw Error("当前IE版本:IE"+e[2]+", 请使用IE10+!");var n=function(){if(document.currentScript)return document.currentScript.src||"";for(var t=document.scripts||document.getElementsByTagName("script"),e=t.length,r="interactive",n=0;n<e;n++)if(t[n].readyState===r)return t[n].src||"";return t[e-1].src||""};t.ASRSDK=r(7),t.ASRSDK.curPath=n().replace(/[^\/]*\.js(\?.*)?$/,"")}}(window)},function(t,e,r){"use strict";r(11);var n={init:function(t){t=t||{},t.audioprocess=t.audioprocess||function(){},t.swfSrc=t.swfSrc||"./recorder.swf",this.options=t,t.flashContainer||this._setupFlashContainer(),this.loadFlash()},start:function(){this.flashInterface().record()},stop:function(){return this.flashInterface().stopRecord()},getData:function(){return this.flashInterface().audioData()},getWavData:function(){return this.flashInterface().wavData()},playSound:function(){this.flashInterface().playSound()},stopSound:function(){this.flashInterface().stopSound()},recordingDuration:function(){this.flashInterface().recordingDuration()},flashInterface:function(){return this.swfObject?this.swfObject.record?this.swfObject:this.swfObject.children[3].record?this.swfObject.children[3]:void 0:null},initialized:function(){this._initialized=!0,this._flashBlockCatched&&this._defaultOnHideFlash(),this.options.initialized&&this.options.initialized()},clearFlash:function(){var t=this.options.flashContainer,e=t.children[0];e&&t.removeChild(e)},loadFlash:function(){var t=this;this._defaultOnShowFlash(),this.clearFlash();var e=document.createElement("div");e.setAttribute("id","recorderFlashObject"),this.options.flashContainer.appendChild(e),swfobject.embedSWF(this.options.swfSrc,"recorderFlashObject",250,170,"11.1.0",void 0,void 0,{allowscriptaccess:"always"},void 0,function(e){e.success?t.swfObject=e.ref:t._showFlashRequiredDialog()})},_setupFlashContainer:function(){this.options.flashContainer=document.createElement("div"),this.options.flashContainer.setAttribute("id","recorderFlashContainer"),this.options.flashContainer.setAttribute("style","position: fixed; left: -9999px; width: 250px; height: 170px; border-radius: 5px 5px;overflow: hidden;visibility: hidden;"),document.body.appendChild(this.options.flashContainer)},_defaultOnShowFlash:function(t){var e=this,r=this.options.flashContainer;r.style.visibility="visible",r.style.left=(window.innerWidth||document.body.offsetWidth)/2-115+"px",r.style.top=(window.innerHeight||document.body.offsetHeight)/2-90+"px",t&&setTimeout(function(){e.flashInterface().showFlash()},20)},_defaultOnHideFlash:function(){var t=this.options.flashContainer;t.style.left="-9999px"},_checkForFlashBlock:function(){var t=this;window.setTimeout(function(){t._initialized||(t._flashBlockCatched=!0,t._defaultOnShowFlash())},400)},_showFlashRequiredDialog:function(){var t=this.options.flashContainer;t.innerHTML="<p>Adobe Flash Player 10.1 or newer is required to use this feature.</p><p><a href='http://get.adobe.com/flashplayer' target='_top'>Get it on Adobe.com.</a></p>",t.style.color="white",t.style.backgroundColor="#fff",t.style.textAlign="center",this._defaultOnShowFlash()},triggerEvent:function(t,e,r){switch(t){case"pcmData":return n.options.audioprocess(e,r);case"initialized":var i=n.options.success;return n._defaultOnHideFlash(),i&&i(),n.initialized();case"recordingStart":var o=n.options.start;return o&&o(),n._defaultOnHideFlash();case"recordingStop":var s=n.options.stop;return s&&s(e,r);case"recordingCancel":n._defaultOnHideFlash();var a=n.options.cancel;return a&&a(),n.loadFlash();case"showFlash":return n._defaultOnShowFlash(e);case"hideFlash":return n._defaultOnHideFlash()}}};window.FlashRecorder=n},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){var e=this,r=[];t=t||{},t.sampleRate=t.sampleRate||16e3,t.bitRate=t.bitRate||32,t.audioprocess=t.audioprocess||function(){},this.isSupported=function(){return f},navigator.mediaDevices.getUserMedia({audio:!0}).then(function(n){var i=new AudioContext,o=4096,a=i.createMediaStreamSource(n),u=i.createScriptProcessor(o,1,1),l=new c.default(i.sampleRate,t.sampleRate,1,o);u.onaudioprocess=function(e){var r=e.inputBuffer.getChannelData(0),n=l.resample(r);t.audioprocess(n)},e.start=function(){u&&a&&(r=[],a.connect(u),u.connect(i.destination),(0,s.log)("开始录音"))},e.stop=function(){u&&a&&(a.disconnect(),u.disconnect(),(0,s.log)("录音结束"))},e.getBlob=function(){return new Float32Array(r)},t.success&&t.success()}).catch(function(e){var r=void 0;switch(e.code||e.name){case 9:r=u.default.NOT_HTTPS;break;case"PermissionDeniedError":case"PERMISSION_DENIED":case"NotAllowedError":r=u.default.NOT_ALLOWED_MIC;break;case"NOT_SUPPORTED_ERROR":case"NotSupportedError":r=u.default.NOT_SUPPORTED;break;case"MANDATORY_UNSATISFIED_ERROR":case"MandatoryUnsatisfiedError":r=u.default.NOT_FOUND_MIC;break;default:r=o({},u.default.OTHER_RECORD_ERROR,{msg:"无法打开麦克风 Error: "+(e.code||e.name)})}t.error&&t.error(r)})}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},s=r(5),a=r(4),u=n(a),l=r(3),c=n(l),f=!0;window.AudioContext=window.AudioContext||window.webkitAudioContext,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(f=!!navigator.getUserMedia,navigator.mediaDevices.getUserMedia=function(t){return f?new Promise(function(e,r){navigator.getUserMedia.call(navigator,t,e,r)}):Promise.reject("NOT_SUPPORTED_ERROR")}),"http:"===location.protocol&&"localhost"!==location.hostname&&(f=!1),i.isSupported=function(){return f},e.default=i},function(t,e){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=function(){function t(){if(!G&&document.getElementsByTagName("body")[0]){try{var t,e=b("span");e.style.display="none",t=L.getElementsByTagName("body")[0].appendChild(e),t.parentNode.removeChild(t),t=null,e=null}catch(t){return}G=!0;for(var r=W.length,n=0;n<r;n++)W[n]()}}function e(t){G?t():W[W.length]=t}function i(t){if(r(M.addEventListener)!=B)M.addEventListener("load",t,!1);else if(r(L.addEventListener)!=B)L.addEventListener("load",t,!1);else if(r(M.attachEvent)!=B)_(M,"onload",t);else if("function"==typeof M.onload){var e=M.onload;M.onload=function(){e(),t()}}else M.onload=t}function o(){var t=L.getElementsByTagName("body")[0],e=b(k);e.setAttribute("style","visibility: hidden;"),e.setAttribute("type",D);var n=t.appendChild(e);if(n){var i=0;!function o(){if(r(n.GetVariable)!=B)try{var a=n.GetVariable("$version");a&&(a=a.split(" ")[1].split(","),Y.pv=[w(a[0]),w(a[1]),w(a[2])])}catch(t){Y.pv=[8,0,0]}else if(i<10)return i++,void setTimeout(o,10);t.removeChild(e),n=null,s()}()}else s()}function s(){var t=V.length;if(t>0)for(var e=0;e<t;e++){var n=V[e].id,i=V[e].callbackFn,o={success:!1,id:n};if(Y.pv[0]>0){var s=g(n);if(s)if(!R(V[e].swfVersion)||Y.wk&&Y.wk<312)if(V[e].expressInstall&&u()){var f={};f.data=V[e].expressInstall,f.width=s.getAttribute("width")||"0",f.height=s.getAttribute("height")||"0",s.getAttribute("class")&&(f.styleclass=s.getAttribute("class")),s.getAttribute("align")&&(f.align=s.getAttribute("align"));for(var h={},d=s.getElementsByTagName("param"),p=d.length,v=0;v<p;v++)"movie"!=d[v].getAttribute("name").toLowerCase()&&(h[d[v].getAttribute("name")]=d[v].getAttribute("value"));l(f,h,n,i)}else c(s),i&&i(o);else E(n,!0),i&&(o.success=!0,o.ref=a(n),o.id=n,i(o))}else if(E(n,!0),i){var y=a(n);y&&r(y.SetVariable)!=B&&(o.success=!0,o.ref=y,o.id=y.id),i(o)}}}function a(t){var e=null,n=g(t);return n&&"OBJECT"===n.nodeName.toUpperCase()&&(e=r(n.SetVariable)!==B?n:n.getElementsByTagName(k)[0]||n),e}function u(){return!X&&R("6.0.65")&&(Y.win||Y.mac)&&!(Y.wk&&Y.wk<312)}function l(t,e,n,i){var o=g(n);if(n=m(n),X=!0,P=i||null,C={success:!1,id:n},o){"OBJECT"==o.nodeName.toUpperCase()?(T=f(o),x=null):(T=o,x=n),t.id=N,(r(t.width)==B||!/%$/.test(t.width)&&w(t.width)<310)&&(t.width="310"),(r(t.height)==B||!/%$/.test(t.height)&&w(t.height)<137)&&(t.height="137");var s=Y.ie?"ActiveX":"PlugIn",a="MMredirectURL="+encodeURIComponent(M.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+s+"&MMdoctitle="+encodeURIComponent(L.title.slice(0,47)+" - Flash Player Installation");if(r(e.flashvars)!=B?e.flashvars+="&"+a:e.flashvars=a,Y.ie&&4!=o.readyState){var u=b("div");n+="SWFObjectNew",u.setAttribute("id",n),o.parentNode.insertBefore(u,o),o.style.display="none",v(o)}d(t,e,n)}}function c(t){if(Y.ie&&4!=t.readyState){t.style.display="none";var e=b("div");t.parentNode.insertBefore(e,t),e.parentNode.replaceChild(f(t),e),v(t)}else t.parentNode.replaceChild(f(t),t)}function f(t){var e=b("div");if(Y.win&&Y.ie)e.innerHTML=t.innerHTML;else{var r=t.getElementsByTagName(k)[0];if(r){var n=r.childNodes;if(n)for(var i=n.length,o=0;o<i;o++)1==n[o].nodeType&&"PARAM"==n[o].nodeName||8==n[o].nodeType||e.appendChild(n[o].cloneNode(!0))}}return e}function h(t,e){var r=b("div");return r.innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+t+"'>"+e+"</object>",r.firstChild}function d(t,e,n){var i,o=g(n);if(n=m(n),Y.wk&&Y.wk<312)return i;if(o){var s,a,u,l=b(Y.ie?"div":k);r(t.id)==B&&(t.id=n);for(u in e)e.hasOwnProperty(u)&&"movie"!==u.toLowerCase()&&p(l,u,e[u]);Y.ie&&(l=h(t.data,l.innerHTML));for(s in t)t.hasOwnProperty(s)&&(a=s.toLowerCase(),"styleclass"===a?l.setAttribute("class",t[s]):"classid"!==a&&"data"!==a&&l.setAttribute(s,t[s]));Y.ie?$[$.length]=t.id:(l.setAttribute("type",D),l.setAttribute("data",t.data)),o.parentNode.replaceChild(l,o),i=l}return i}function p(t,e,r){var n=b("param");n.setAttribute("name",e),n.setAttribute("value",r),t.appendChild(n)}function v(t){var e=g(t);e&&"OBJECT"==e.nodeName.toUpperCase()&&(Y.ie?(e.style.display="none",function t(){if(4==e.readyState){for(var r in e)"function"==typeof e[r]&&(e[r]=null);e.parentNode.removeChild(e)}else setTimeout(t,10)}()):e.parentNode.removeChild(e))}function y(t){return t&&t.nodeType&&1===t.nodeType}function m(t){return y(t)?t.id:t}function g(t){if(y(t))return t;var e=null;try{e=L.getElementById(t)}catch(t){}return e}function b(t){return L.createElement(t)}function w(t){return parseInt(t,10)}function _(t,e,r){t.attachEvent(e,r),q[q.length]=[t,e,r]}function R(t){t+="";var e=Y.pv,r=t.split(".");return r[0]=w(r[0]),r[1]=w(r[1])||0,r[2]=w(r[2])||0,e[0]>r[0]||e[0]==r[0]&&e[1]>r[1]||e[0]==r[0]&&e[1]==r[1]&&e[2]>=r[2]}function S(t,e,n,i){var o=L.getElementsByTagName("head")[0];if(o){var s="string"==typeof n?n:"screen";if(i&&(A=null,F=null),!A||F!=s){var a=b("style");a.setAttribute("type","text/css"),a.setAttribute("media",s),A=o.appendChild(a),Y.ie&&r(L.styleSheets)!=B&&L.styleSheets.length>0&&(A=L.styleSheets[L.styleSheets.length-1]),F=s}A&&(r(A.addRule)!=B?A.addRule(t,e):r(L.createTextNode)!=B&&A.appendChild(L.createTextNode(t+" {"+e+"}")))}}function E(t,e){if(J){var r=e?"visible":"hidden",n=g(t);G&&n?n.style.visibility=r:"string"==typeof t&&S("#"+t,"visibility:"+r)}}function O(t){var e=/[\\\"<>\.;]/,n=null!=e.exec(t);return n&&("undefined"==typeof encodeURIComponent?"undefined":r(encodeURIComponent))!=B?encodeURIComponent(t):t}var T,x,P,C,A,F,B="undefined",k="object",I="Shockwave Flash",j="ShockwaveFlash.ShockwaveFlash",D="application/x-shockwave-flash",N="SWFObjectExprInst",U="onreadystatechange",M=window,L=document,H=navigator,z=!1,W=[],V=[],$=[],q=[],G=!1,X=!1,J=!0,K=!1,Y=function(){var t=r(L.getElementById)!=B&&r(L.getElementsByTagName)!=B&&r(L.createElement)!=B,e=H.userAgent.toLowerCase(),n=H.platform.toLowerCase(),i=n?/win/.test(n):/win/.test(e),o=n?/mac/.test(n):/mac/.test(e),s=!!/webkit/.test(e)&&parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),a="Microsoft Internet Explorer"===H.appName,u=[0,0,0],l=null;if(r(H.plugins)!=B&&r(H.plugins[I])==k)l=H.plugins[I].description,l&&r(H.mimeTypes)!=B&&H.mimeTypes[D]&&H.mimeTypes[D].enabledPlugin&&(z=!0,a=!1,l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),u[0]=w(l.replace(/^(.*)\..*$/,"$1")),u[1]=w(l.replace(/^.*\.(.*)\s.*$/,"$1")),u[2]=/[a-zA-Z]/.test(l)?w(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0);else if(r(M.ActiveXObject)!=B)try{var c=new ActiveXObject(j);c&&(l=c.GetVariable("$version"),l&&(a=!0,l=l.split(" ")[1].split(","),u=[w(l[0]),w(l[1]),w(l[2])]))}catch(t){}return{w3:t,pv:u,wk:s,ie:a,win:i,mac:o}}();(function(){Y.w3&&((r(L.readyState)!=B&&("complete"===L.readyState||"interactive"===L.readyState)||r(L.readyState)==B&&(L.getElementsByTagName("body")[0]||L.body))&&t(),G||(r(L.addEventListener)!=B&&L.addEventListener("DOMContentLoaded",t,!1),Y.ie&&(L.attachEvent(U,function e(){"complete"==L.readyState&&(L.detachEvent(U,e),t())}),M==top&&!function e(){if(!G){try{L.documentElement.doScroll("left")}catch(t){return void setTimeout(e,0)}t()}}()),Y.wk&&!function e(){if(!G)return/loaded|complete/.test(L.readyState)?void t():void setTimeout(e,0)}()))})();W[0]=function(){z?o():s()};(function(){Y.ie&&window.attachEvent("onunload",function(){for(var t=q.length,e=0;e<t;e++)q[e][0].detachEvent(q[e][1],q[e][2]);for(var r=$.length,i=0;i<r;i++)v($[i]);for(var o in Y)Y[o]=null;Y=null;for(var s in n)n[s]=null;n=null})})();return{registerObject:function(t,e,r,n){if(Y.w3&&t&&e){var i={};i.id=t,i.swfVersion=e,i.expressInstall=r,i.callbackFn=n,V[V.length]=i,E(t,!1)}else n&&n({success:!1,id:t})},getObjectById:function(t){if(Y.w3)return a(t)},embedSWF:function(t,n,i,o,s,a,c,f,h,p){
var v=m(n),y={success:!1,id:v};Y.w3&&!(Y.wk&&Y.wk<312)&&t&&n&&i&&o&&s?(E(v,!1),e(function(){i+="",o+="";var e={};if(h&&("undefined"==typeof h?"undefined":r(h))===k)for(var m in h)e[m]=h[m];e.data=t,e.width=i,e.height=o;var g={};if(f&&("undefined"==typeof f?"undefined":r(f))===k)for(var b in f)g[b]=f[b];if(c&&("undefined"==typeof c?"undefined":r(c))===k)for(var w in c)if(c.hasOwnProperty(w)){var _=K?encodeURIComponent(w):w,S=K?encodeURIComponent(c[w]):c[w];r(g.flashvars)!=B?g.flashvars+="&"+_+"="+S:g.flashvars=_+"="+S}if(R(s)){var O=d(e,g,n);e.id==v&&E(v,!0),y.success=!0,y.ref=O,y.id=O.id}else{if(a&&u())return e.data=a,void l(e,g,n,p);E(v,!0)}p&&p(y)})):p&&p(y)},switchOffAutoHideShow:function(){J=!1},enableUriEncoding:function(t){K=("undefined"==typeof t?"undefined":r(t))===B||t},ua:Y,getFlashPlayerVersion:function(){return{major:Y.pv[0],minor:Y.pv[1],release:Y.pv[2]}},hasFlashPlayerVersion:R,createSWF:function(t,e,r){return Y.w3?d(t,e,r):void 0},showExpressInstall:function(t,e,r,n){Y.w3&&u()&&l(t,e,r,n)},removeSWF:function(t){Y.w3&&v(t)},createCSS:function(t,e,r,n){Y.w3&&S(t,e,r,n)},addDomLoadEvent:e,addLoadEvent:i,getQueryParamValue:function(t){var e=L.location.search||L.location.hash;if(e){if(/\?/.test(e)&&(e=e.split("?")[1]),null==t)return O(e);for(var r=e.split("&"),n=0;n<r.length;n++)if(r[n].substring(0,r[n].indexOf("="))==t)return O(r[n].substring(r[n].indexOf("=")+1))}return""},expressInstallCallback:function(){if(X){var t=g(N);t&&T&&(t.parentNode.replaceChild(T,t),x&&(E(x,!0),Y.ie&&(T.style.display="block")),P&&P(C)),X=!1}},version:"2.3"}}();window.swfobject=n},function(t,e,r){"use strict";t.exports=r(16)},function(t,e,r){"use strict";var n=r(1);t.exports=n,n.prototype.done=function(t,e){var r=arguments.length?this.then.apply(this,arguments):this;r.then(null,function(t){setTimeout(function(){throw t},0)})}},function(t,e,r){"use strict";function n(t){var e=new i(i._61);return e._81=1,e._65=t,e}var i=r(1);t.exports=i;var o=n(!0),s=n(!1),a=n(null),u=n(void 0),l=n(0),c=n("");i.resolve=function(t){if(t instanceof i)return t;if(null===t)return a;if(void 0===t)return u;if(t===!0)return o;if(t===!1)return s;if(0===t)return l;if(""===t)return c;if("object"==typeof t||"function"==typeof t)try{var e=t.then;if("function"==typeof e)return new i(e.bind(t))}catch(t){return new i(function(e,r){r(t)})}return n(t)},i.all=function(t){var e=Array.prototype.slice.call(t);return new i(function(t,r){function n(s,a){if(a&&("object"==typeof a||"function"==typeof a)){if(a instanceof i&&a.then===i.prototype.then){for(;3===a._81;)a=a._65;return 1===a._81?n(s,a._65):(2===a._81&&r(a._65),void a.then(function(t){n(s,t)},r))}var u=a.then;if("function"==typeof u){var l=new i(u.bind(a));return void l.then(function(t){n(s,t)},r)}}e[s]=a,0===--o&&t(e)}if(0===e.length)return t([]);for(var o=e.length,s=0;s<e.length;s++)n(s,e[s])})},i.reject=function(t){return new i(function(e,r){r(t)})},i.race=function(t){return new i(function(e,r){t.forEach(function(t){i.resolve(t).then(e,r)})})},i.prototype.catch=function(t){return this.then(null,t)}},function(t,e,r){"use strict";var n=r(1);t.exports=n,n.prototype.finally=function(t){return this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){throw e})})}},function(t,e,r){"use strict";t.exports=r(1),r(13),r(15),r(14),r(17),r(18)},function(t,e,r){"use strict";function n(t,e){for(var r=[],n=0;n<e;n++)r.push("a"+n);var i=["return function ("+r.join(",")+") {","var self = this;","return new Promise(function (rs, rj) {","var res = fn.call(",["self"].concat(r).concat([a]).join(","),");","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],i)(o,t)}function i(t){for(var e=Math.max(t.length-1,3),r=[],n=0;n<e;n++)r.push("a"+n);var i=["return function ("+r.join(",")+") {","var self = this;","var args;","var argLength = arguments.length;","if (arguments.length > "+e+") {","args = new Array(arguments.length + 1);","for (var i = 0; i < arguments.length; i++) {","args[i] = arguments[i];","}","}","return new Promise(function (rs, rj) {","var cb = "+a+";","var res;","switch (argLength) {",r.concat(["extra"]).map(function(t,e){return"case "+e+":res = fn.call("+["self"].concat(r.slice(0,e)).concat("cb").join(",")+");break;"}).join(""),"default:","args[argLength] = cb;","res = fn.apply(self, args);","}","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],i)(o,t)}var o=r(1),s=r(6);t.exports=o,o.denodeify=function(t,e){return"number"==typeof e&&e!==1/0?n(t,e):i(t)};var a="function (err, res) {if (err) { rj(err); } else { rs(res); }}";o.nodeify=function(t){return function(){var e=Array.prototype.slice.call(arguments),r="function"==typeof e[e.length-1]?e.pop():null,n=this;try{return t.apply(this,arguments).nodeify(r,n)}catch(t){if(null===r||"undefined"==typeof r)return new o(function(e,r){r(t)});s(function(){r.call(n,t)})}}},o.prototype.nodeify=function(t,e){return"function"!=typeof t?this:void this.then(function(r){s(function(){t.call(e,null,r)})},function(r){s(function(){t.call(e,r)})})}},function(t,e,r){"use strict";var n=r(1);t.exports=n,n.enableSynchronous=function(){n.prototype.isPending=function(){return 0==this.getState()},n.prototype.isFulfilled=function(){return 1==this.getState()},n.prototype.isRejected=function(){return 2==this.getState()},n.prototype.getValue=function(){if(3===this._81)return this._65.getValue();if(!this.isFulfilled())throw new Error("Cannot get a value of an unfulfilled promise.");return this._65},n.prototype.getReason=function(){if(3===this._81)return this._65.getReason();if(!this.isRejected())throw new Error("Cannot get a rejection reason of a non-rejected promise.");return this._65},n.prototype.getState=function(){return 3===this._81?this._65.getState():this._81===-1||this._81===-2?0:this._81}},n.disableSynchronous=function(){n.prototype.isPending=void 0,n.prototype.isFulfilled=void 0,n.prototype.isRejected=void 0,n.prototype.getValue=void 0,n.prototype.getReason=void 0,n.prototype.getState=void 0}},function(t,e){!function(t){"use strict";function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function r(t){return"string"!=typeof t&&(t=String(t)),t}function n(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return m.iterable&&(e[Symbol.iterator]=function(){return e}),e}function i(t){this.map={},t instanceof i?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function o(t){return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function s(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function a(t){var e=new FileReader,r=s(e);return e.readAsArrayBuffer(t),r}function u(t){var e=new FileReader,r=s(e);return e.readAsText(t),r}function l(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}function c(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function f(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(m.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(m.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(m.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(m.arrayBuffer&&m.blob&&b(t))this._bodyArrayBuffer=c(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!m.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!w(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=c(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):m.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},m.blob&&(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(a)}),this.text=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(l(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},m.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function h(t){var e=t.toUpperCase();return _.indexOf(e)>-1?e:t}function d(t,e){e=e||{};var r=e.body;if(t instanceof d){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new i(t.headers)),this.method=t.method,this.mode=t.mode,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new i(e.headers)),this.method=h(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function p(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(i))}}),e}function v(t){var e=new i;return t.split(/\r?\n/).forEach(function(t){var r=t.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();e.append(n,i)}}),e}function y(t,e){e||(e={}),this.type="default",this.status="status"in e?e.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new i(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var m={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(m.arrayBuffer)var g=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],b=function(t){return t&&DataView.prototype.isPrototypeOf(t)},w=ArrayBuffer.isView||function(t){return t&&g.indexOf(Object.prototype.toString.call(t))>-1};i.prototype.append=function(t,n){t=e(t),n=r(n);var i=this.map[t];this.map[t]=i?i+","+n:n},i.prototype.delete=function(t){delete this.map[e(t)]},i.prototype.get=function(t){return t=e(t),this.has(t)?this.map[t]:null},i.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},i.prototype.set=function(t,n){this.map[e(t)]=r(n)},i.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},i.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),n(t)},i.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),n(t)},i.prototype.entries=function(){var t=[];return this.forEach(function(e,r){t.push([r,e])}),n(t)},m.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var _=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];d.prototype.clone=function(){return new d(this,{body:this._bodyInit})},f.call(d.prototype),f.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},y.error=function(){var t=new y(null,{status:0,statusText:""});return t.type="error",t};var R=[301,302,303,307,308];y.redirect=function(t,e){if(R.indexOf(e)===-1)throw new RangeError("Invalid status code");return new y(null,{status:e,headers:{location:t}})},t.Headers=i,t.Request=d,t.Response=y,t.fetch=function(t,e){return new Promise(function(r,n){var i=new d(t,e),o=new XMLHttpRequest;o.onload=function(){var t={status:o.status,statusText:o.statusText,headers:v(o.getAllResponseHeaders()||"")};t.url="responseURL"in o?o.responseURL:t.headers.get("X-Request-URL");var e="response"in o?o.response:o.responseText;r(new y(e,t))},o.onerror=function(){n(new TypeError("Network request failed"))},o.ontimeout=function(){n(new TypeError("Network request failed"))},o.open(i.method,i.url,!0),"include"===i.credentials&&(o.withCredentials=!0),"responseType"in o&&m.blob&&(o.responseType="blob"),i.headers.forEach(function(t,e){o.setRequestHeader(e,t)}),o.send("undefined"==typeof i._bodyInit?null:i._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(t,e){t.exports=require("domain")}]);
//# sourceMappingURL=uns_asr_sdk.map